(function(){var t=[].slice;this.Chart=function(){"use strict";function e(t){if(this.selectors=t,!e.Util.is("String",this.selectors))throw new TypeError("This argument is not selectors string")}return e.Util=function(){function e(){}return e.extend=function(){var e,r,n,a,i,s,o;for(e=arguments[0],a=2<=arguments.length?t.call(arguments,1):[],s=0,o=a.length;o>s;s++){n=a[s];for(r in n)i=n[r],e[r]=i}return e},e.is=function(t,e){var r;return r=Object.prototype.toString.call(e).slice(8,-1),void 0!==e&&null!==e&&r===t},e}(),e.prototype.Bar=function(t,r){var n;return this.validateData(t),this.Bar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuad",onAnimationComplete:null},n=this.mergeOptions(this.Bar.defaults,r),new e.D3Bar(this.selectors,t,n).render()},e.prototype.Doughnut=function(t,r){var n;return this.validateData(t),this.Doughnut.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null},n=this.mergeOptions(this.Doughnut.defaults,r),new e.D3Doughnut(this.selectors,t,n).render()},e.prototype.Line=function(t,r){var n;return this.validateData(t),this.Line.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:2,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuad",onAnimationComplete:null},n=this.mergeOptions(this.Line.defaults,r),new e.D3Line(this.selectors,t,n).render()},e.prototype.Pie=function(t,r){var n;return this.validateData(t),this.Pie.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null},n=this.mergeOptions(this.Pie.defaults,r),new e.D3Pie(this.selectors,t,n).render()},e.prototype.easingTypes={linear:"linear",easeInQuad:"quad-in",easeOutQuad:"quad-out",easeInOutQuad:"quad-in-out",easeInCubic:"cubic-in",easeOutCubic:"cubic-out",easeInOutCubic:"cubic-in-out",easeInSine:"sin-in",easeOutSine:"sin-out",easeInOutSine:"sin-in-out",easeInExpo:"exp-in",easeOutExpo:"exp-out",easeInOutExpo:"exp-in-out",easeInCirc:"circle-in",easeOutCirc:"circle-out",easeInOutCirc:"circle-in-out",easeInElastic:"elastic-out",easeOutElastic:"elastic-in",easeInOutElastic:"elastic-in-out",easeInBack:"back-in",easeOutBack:"back-out",easeInOutBack:"back-in-out",easeInBounce:"bounce-out",easeOutBounce:"bounce-in",easeInOutBounce:"bounce-in-out"},e.prototype.getEasingType=function(t){var e;if(e=this.easingTypes[t],null==e)throw new ReferenceError("'"+t+"' is not a easing type name");return e},e.prototype.mergeOptions=function(t,r){var n;return n=e.Util.extend({},t,r),n.animationEasing=this.getEasingType(n.animationEasing),n},e.prototype.validateData=function(t){if(!e.Util.is("Array",t)&&!e.Util.is("Object",t))throw new TypeError(""+t+" is not an array or object")},e}()}).call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Chart.D3Chart=function(){"use strict";function e(e,r,n,a){this.selectors=e,this.data=r,this.options=n,this.updateScaleTextStyle=t(this.updateScaleTextStyle,this),this.updateScaleStrokeStyle=t(this.updateScaleStrokeStyle,this),this.updateGridTickStyle=t(this.updateGridTickStyle,this),this.renderYAxis=t(this.renderYAxis,this),this.renderXAxis=t(this.renderXAxis,this),this.renderGrid=t(this.renderGrid,this),this.renderYGrid=t(this.renderYGrid,this),this.renderXGrid=t(this.renderXGrid,this),this.getTransitionElement=t(this.getTransitionElement,this),this.getRootElementWidth=t(this.getRootElementWidth,this),this.getRootElementHeight=t(this.getRootElementHeight,this),this.getRootElement=t(this.getRootElement,this),this.attrTranslateToCenter=t(this.attrTranslateToCenter,this),a||(a={top:0,right:0,bottom:0,left:0}),this.defineRootElement(this.getRootElement(),this.getRootElementWidth(),this.getRootElementHeight(),a)}var r;return e.xAxis=function(t,e){return null==e&&(e=10),d3.svg.axis().scale(t).ticks(e).tickSize(3,3).tickPadding(5).orient("bottom")},e.yAxis=function(t){return d3.svg.axis().scale(t).ticks(20).tickSize(3,0).tickPadding(7).orient("left")},e.prototype.attrTranslateToCenter=function(){var t,e;return e=this.getRootElementWidth()/2,t=this.getRootElementHeight()/2,"translate("+e+", "+t+")"},e.prototype.classedName=function(t){return r(t,!1)},e.prototype.className=function(t){return r(t,!0)},r=function(t,e){var r;return r=e?".":"",""+r+"d3mc-"+t},e.prototype.defineRootElement=function(t,e,r,n){return this.width=e-n.left-n.right,this.height=r-n.top-n.bottom,this.getRootElement().attr({width:this.width+n.left+n.right}).attr({height:this.height+n.top+n.bottom}).append("g").attr({transform:"translate("+n.left+","+n.top+")"}).classed(this.classedName("base-group"),!0)},e.prototype.duration=function(t){return null==t&&(t=this.options),17.333*t.animationSteps},e.prototype.getRootElement=function(){return d3.select(this.selectors)},e.prototype.getRootElementHeight=function(){return+this.getRootElement().attr("height")},e.prototype.getRootElementWidth=function(){return+this.getRootElement().attr("width")},e.prototype.getTransitionElement=function(t,e){return this.getRootElement().transition().duration(t).ease(e.animationEasing)},e.prototype.renderXGrid=function(t,r){var n;return n=t.rangeBand()/2,this.getRootElement().select(this.className("base-group")).append("g").classed(this.classedName("grid-group"),!0).classed(this.classedName("grid-x-group"),!0).call(e.xAxis(t).tickFormat("")).selectAll(".tick").classed(this.classedName("tick"),!0).classed("tick",!1).selectAll("line").attr({x1:n,x2:n,y2:r}),this.getRootElement().selectAll(this.className("grid-x-group")).select(".domain").remove()},e.prototype.renderYGrid=function(t,r){return this.getRootElement().select(this.className("base-group")).append("g").classed(this.classedName("grid-group"),!0).classed(this.classedName("grid-y-group"),!0).call(e.yAxis(t).tickFormat("")).selectAll(".tick").classed(this.classedName("tick"),!0).classed("tick",!1).selectAll("line").attr({x1:0,x2:r})},e.prototype.renderGrid=function(){return this.getRootElement().selectAll(""+this.className("grid-group")).selectAll(""+this.className("domain")+", text").data([]).exit().remove()},e.prototype.renderXAxis=function(t,r){return this.getRootElement().select(this.className("base-group")).append("g").classed(this.classedName("scale-group"),!0).classed(this.classedName("scale-x-group"),!0).attr("transform","translate(0,"+r+")").call(e.xAxis(t)).selectAll(".tick").classed(this.classedName("tick"),!0).classed("tick",!1)},e.prototype.renderYAxis=function(t){return this.getRootElement().select(this.className("base-group")).append("g").classed(this.classedName("scale-group"),!0).classed(this.classedName("scale-y-group"),!0).call(e.yAxis(t)).selectAll(".tick").classed(this.classedName("tick"),!0).classed("tick",!1).select(":first-child > text").remove()},e.prototype.updateGridTickStyle=function(t){return this.getRootElement().selectAll(""+this.className("grid-group")+" "+this.className("tick")+" line").attr({stroke:t.scaleGridLineColor})},e.prototype.updateScaleStrokeStyle=function(t){return this.getRootElement().selectAll(""+this.className("scale-group")).selectAll(".domain, "+this.className("tick")+" line").attr({fill:"none"}).attr({stroke:t.scaleLineColor}).attr({"stroke-width":t.scaleLineWidth})},e.prototype.updateScaleTextStyle=function(t){return this.getRootElement().selectAll(""+this.className("scale-group")+" text").attr({"font-family":t.scaleFontFamily}).attr({"font-size":t.scaleFontSize}).attr({"font-style":t.scaleFontStyle}).attr({fill:t.scaleFontColor})},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,r=function(t,r){function n(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};Chart.D3Pie=function(e){"use strict";function n(e,r,a){this.transitionEndAll=t(this.transitionEndAll,this);var i;i={top:0,right:0,bottom:0,left:0},n.__super__.constructor.call(this,e,r,a,i)}return r(n,e),n.prototype.attrSegmentStroke=function(t){return t.segmentShowStroke?{stroke:t.segmentStrokeColor,"stroke-width":t.segmentStrokeWidth}:{stroke:"none","stroke-width":0}},n.prototype.getArc=function(t,e){return d3.svg.arc().innerRadius(t).outerRadius(e)},n.prototype.getInnerRadius=function(){return 0},n.prototype.getOuterRadius=function(t,e,r){return~~(Math.min(t,e)/2-r)},n.prototype.render=function(){var t,e,r,n,a,i,s,o,l;switch(i=5,s=this.options,n=this.data,r=this.width,e=this.height,o=this.getOuterRadius(r,e,i),a=this.getInnerRadius(o,s),t=this.getArc(a,o),l=this.renderPie(n,s),this.transitionEndAllCount=this.setAnimationComplete(s),isNaN(this.transitionEndAllCount)&&s.onAnimationComplete.call(this),!1){case!(s.animation&&s.animateRotate&&s.animateScale):this.transitRotation(l,t,s),this.transitExpansion(s);break;case!(s.animation&&s.animateRotate&&!s.animateScale):this.transitRotation(l,t,s);break;case!(s.animation&&s.animateScale&&!s.animateRotate):this.renderPiePath(l,t),this.transitExpansion(s);break;default:this.renderPiePath(l,t)}return this},n.prototype.renderPie=function(t,e,r){var n,a;return null==r&&(r="pie"),a=d3.layout.pie().value(function(t){return t.value}).sort(null),n=t.map(function(t){return t.color}),this.getRootElement().select(this.className("base-group")).append("g").classed(this.classedName(""+r+"-chart-group"),!0).selectAll("path").data(a(t)).enter().append("path").classed(this.classedName(r),!0).attr(this.attrSegmentStroke(e)).attr({transform:this.attrTranslateToCenter(),fill:function(t,e){return n[e]}})},n.prototype.renderPiePath=function(t,e){return t.attr({d:e})},n.prototype.setAnimationComplete=function(t){var e;return e=t,"function"!=typeof e.onAnimationComplete?1/0:e.animation&&e.animateRotate&&e.animateScale?2:e.animation&&(e.animateRotate||e.animateScale)?1:0/0},n.prototype.transitExpansion=function(t){return t.animation&&t.animateScale?this.getRootElement().selectAll("g").attr({transform:""+this.attrTranslateToCenter()+" scale(0)"}).transition().call(this.transitionEndAll,t).duration(this.duration()).ease(t.animationEasing).attr({transform:"scale(1)"}):null},n.prototype.transitRotation=function(t,e,r){return r.animation&&r.animateRotate?t.transition().call(this.transitionEndAll,r).duration(this.duration()).ease(r.animationEasing).attrTween("d",function(t){var r;return r=d3.interpolate({startAngle:0,endAngle:0},t),function(t){return e(r(t))}}):null},n.prototype.transitionEndAll=function(t,e){var r;return r=0,t.each(function(){return++r}).each("end",function(t){return function(){return--r||0!==--t.transitionEndAllCount?void 0:e.onAnimationComplete.apply(t,arguments)}}(this))},n}(Chart.D3Chart)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,r=function(t,r){function n(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};Chart.D3Bar=function(e){"use strict";function n(e,r,a){this.transitBarBorder=t(this.transitBarBorder,this),this.transitBar=t(this.transitBar,this),this.renderBarBorder=t(this.renderBarBorder,this),this.renderBar=t(this.renderBar,this),this.renderBars=t(this.renderBars,this),this.render=t(this.render,this);var i;i={top:13,right:23,bottom:24,left:55},n.__super__.constructor.call(this,e,r,a,i)}return r(n,e),n.adjustRangeBand=function(t){return t-1},n.rectBorderPath=function(t,e,r,a,i,s){var o,l,u,c,h,d;return o=r,u=s.barStrokeWidth/2,h=a(e),c=n.adjustRangeBand(a.rangeBand()),d=i(t.value)+u,l=[{x:h+u,y:o},{x:h+u,y:d},{x:h+c-u,y:d},{x:h+c-u,y:o}],d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y})(l)},n.xScale=function(t,e){return d3.scale.ordinal().domain(t).rangeRoundBands([0,e],0,0)},n.yScale=function(t,e,r){var n;return null==r&&(r=0),n=d3.max(t,function(t){return d3.max(t.values,function(t){return t.value})}),d3.scale.linear().domain([0,n]).range([e,r]).nice()},n.prototype.generateData=function(t,e){var r;return null==t||null==e?null:(r=[],e.forEach(function(e){return e.data.map(function(n,a){return r.push({value:n,label:t[a],fillColor:e.fillColor,strokeColor:e.strokeColor})})}),d3.nest().key(function(t){return t.label}).entries(r))},n.prototype.render=function(){var t,e,r,a,i,s,o,l,u,c,h,d;return s=this.data.labels,a=this.data.datasets,r=this.generateData(s,a),null==r&&null==(null!=r?r.length:void 0)?this:(o=this.options,e=this.width,t=this.height,l=n.xScale(s,e),h=d3.range(a.length),d=l.rangeBand()-2*o.barValueSpacing,u=n.xScale(h,d),c=n.yScale(r,t),this.renderXGrid(l,t),this.renderYGrid(c,e),this.renderGrid(),this.renderXAxis(l,t),this.renderYAxis(c),this.renderBars(r,l,o),this.renderBar(t,u,c,o),this.renderBarBorder(t,u,c,o),this.updateGridTickStyle(o),this.updateScaleStrokeStyle(o),this.updateScaleTextStyle(o),i=this.getTransitionElement(this.duration(),o),this.transitBar(i,t,c),this.transitBarBorder(i,t),this)},n.prototype.renderBars=function(t,e,r){return this.getRootElement().select(this.className("base-group")).append("g").classed(this.classedName("bar-chart-group"),!0).selectAll(this.className("bars-group")).data(t).enter().append("g").classed(this.classedName("bars-group"),!0).attr("transform",function(t){return"translate("+(e(t.key)+r.barValueSpacing)+",0)"})},n.prototype.renderBar=function(t,e,r){return this.getRootElement().selectAll(this.className("bars-group")).selectAll("rect").data(function(t){return t.values}).enter().append("g").classed(this.classedName("bar-group"),!0).append("rect").classed(this.classedName("bar"),!0).attr("x",function(t,r){return e(r)}).attr("width",n.adjustRangeBand(e.rangeBand())).attr("y",function(t){return r(t.value)}).attr("height",function(e){return t-r(e.value)}).attr("fill",function(t){return t.fillColor})},n.prototype.renderBarBorder=function(t,e,r,a){return this.getRootElement().selectAll(this.className("bars-group")).selectAll(this.className("bar-group")).append("path").classed(this.classedName("bar-border"),!0).attr("d",function(i,s){return n.rectBorderPath(i,s,t,e,r,a)}).attr("fill","none").attr("stroke",function(t){return t.strokeColor}).attr("stroke-width",a.barStrokeWidth)},n.prototype.transitBar=function(t,e,r){return this.getRootElement().selectAll(this.className("bar")).attr("y",e).attr("height",0),t.selectAll(this.className("bar")).attr("y",function(t){return r(t.value)}).attr("height",function(t){return e-r(t.value)})},n.prototype.transitBarBorder=function(t,e){return this.getRootElement().selectAll(this.className("bar-border")).attr("transform","translate(0,"+e+") scale(1,0)"),t.selectAll(this.className("bar-border")).attr("transform","translate(0,0) scale(1,1)")},n}(Chart.D3Chart)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var a in r)t.call(r,a)&&(e[a]=r[a]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};Chart.D3Doughnut=function(t){"use strict";function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.getInnerRadius=function(t,e){return~~(t*(e.percentageInnerCutout/100))},r.prototype.renderPie=function(t,e){return r.__super__.renderPie.call(this,t,e,"doughnut")},r}(Chart.D3Pie)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,r=function(t,r){function n(){this.constructor=t}for(var a in r)e.call(r,a)&&(t[a]=r[a]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};Chart.D3Line=function(e){"use strict";function n(e,r,a){this.transitLines=t(this.transitLines,this),this.transitDots=t(this.transitDots,this),this.transitAreas=t(this.transitAreas,this),this.renderLines=t(this.renderLines,this),this.renderDots=t(this.renderDots,this),this.renderAreas=t(this.renderAreas,this),this.renderLinesGroup=t(this.renderLinesGroup,this),this.render=t(this.render,this);var i;i={top:13,right:23,bottom:24,left:55},n.__super__.constructor.call(this,e,r,a,i)}return r(n,e),n.area=function(t,e,r,a,i){var s;return s=a.bezierCurve?n.bezierCurve:"linear",d3.svg.area().x(function(e,n){return t(r[n])}).y0(i).y1(function(t){return e(t)}).interpolate(s)},n.bezierCurve=function(t){var e,r;return r=t.shift(),e=""+r[0]+" "+r[1],t.forEach(function(t){var n;return n=(t[0]-r[0])/2,e+=" C "+(r[0]+n)+" "+r[1]+" "+(t[0]-n)+" "+t[1]+" "+t[0]+" "+t[1],r=t}),e},n.line=function(t,e,r,a){var i;return i=a.bezierCurve?n.bezierCurve:"linear",d3.svg.line().x(function(e,n){return t(r[n])}).y(function(t){return e(t)}).interpolate(i)},n.xScale=function(t,e){return d3.scale.ordinal().domain(t).rangePoints([0,e],0,0)},n.yScale=function(t,e,r){var n;return null==r&&(r=0),n=d3.max(t,function(t){return d3.max(t.data)}),d3.scale.linear().domain([0,n]).range([e,r]).nice()},n.prototype.render=function(){var t,e,r,a,i,s,o,l,u,c,h;return s=this.data.labels,a=this.data.datasets,null==a&&null==(null!=a?a.length:void 0)?this:(l=this.options,u=this.options.barStrokeWidth,r=this.width,e=this.height,c=n.xScale(s,r),h=n.yScale(a,e),this.renderXGrid(c,e),this.renderYGrid(h,r),this.renderGrid(),this.renderXAxis(c,e),this.renderYAxis(h),this.renderLinesGroup(a),t=n.area(c,h,s,l,e),this.renderAreas(t,a,l),o=n.line(c,h,s,l),this.renderLines(o,a,l),this.renderDots(a,s,c,h,l),this.updateGridTickStyle(l),this.updateScaleStrokeStyle(l),this.updateScaleTextStyle(l),i=this.getTransitionElement(this.duration(),l),this.transitAreas(i,e),this.transitLines(i,e),this.transitDots(i,e,h),this)},n.prototype.renderLinesGroup=function(t){return this.getRootElement().select(this.className("base-group")).append("g").classed(this.classedName("line-chart-group"),!0).append("g").classed(this.classedName("lines-group"),!0).selectAll("g").data(t).enter().append("g").classed(this.classedName("line-group"),!0)},n.prototype.renderAreas=function(t,e,r){return r.datasetFill?this.getRootElement().selectAll(this.className("line-group")).data(e).append("path").classed(this.classedName("area"),!0).attr("d",function(e){return t(e.data)}).attr("stroke","none").attr("fill",function(t){return t.fillColor}):null},n.prototype.renderDots=function(t,e,r,n,a){var i;return a.pointDot?(i=t.map(function(t){return t.data.map(function(e){return{value:e,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor}})}),this.getRootElement().selectAll(this.className("line-group")).data(i).selectAll(this.className("dot")).data(function(t){return t}).enter().append("circle").classed(this.classedName("dot"),!0).attr({r:a.pointDotRadius}).attr("cx",function(t,n){return r(e[n])}).attr("cy",function(t){return n(t.value)}).attr("stroke",function(t){return t.pointStrokeColor}).attr("stroke-width",a.pointDotStrokeWidth).attr("fill",function(t){return t.pointColor})):null},n.prototype.renderLines=function(t,e,r){return this.getRootElement().selectAll(this.className("line-group")).data(e).append("path").classed(this.classedName("line"),!0).attr("d",function(e){return t(e.data)}).attr("stroke",function(t){return t.strokeColor}).attr("stroke-width",r.datasetStrokeWidth).attr("fill","none")},n.prototype.transitAreas=function(t,e){return this.getRootElement().selectAll(this.className("area")).attr("transform","translate(0,"+e+") scale(1,0)"),t.selectAll(this.className("area")).attr("transform","translate(0,0) scale(1,1)")},n.prototype.transitDots=function(t,e,r){return this.getRootElement().selectAll(this.className("dot")).attr("cy",e),t.selectAll(this.className("dot")).attr("cy",function(t){return r(t.value)})},n.prototype.transitLines=function(t,e){return this.getRootElement().selectAll(this.className("line")).attr("transform","translate(0,"+e+") scale(1,0)"),t.selectAll(this.className("line")).attr("transform","translate(0,0) scale(1,1)")},n}(Chart.D3Chart)}.call(this);